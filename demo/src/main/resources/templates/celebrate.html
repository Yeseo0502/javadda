<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¶•í•˜í•©ë‹ˆë‹¤!</title>
    <style>
        /* í°íŠ¸ ì •ì˜ */
        @font-face {
            font-family: 'PFStardustS';
            src: url('/fonts/PFStardustS.ttf') format('truetype');
        }

        @font-face {
            font-family: 'PFStardustExtraBold';
            src: url('/fonts/PFStardustExtraBold.ttf') format('truetype');
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PFStardustS', sans-serif; 
        }

        body {
            background: linear-gradient(135deg, #C8E09D 0%, #A8D080 100%); 
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* ìƒ‰ì¢…ì´ ì¡°ê° ì• ë‹ˆë©”ì´ì…˜ */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            top: -20px;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                top: 100vh;
            }
        }

        .container {
            max-width: 1200px;
            width: 100%;
            border: 5px solid #629455; 
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            min-height: 700px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 40px;
        }

        .logo {
            font-size: 50px;
            font-weight: bold;
            color: #629455;
            font-family: 'PFStardustExtraBold', sans-serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .time {
            font-size: 60px;
            font-weight: bold;
            color: #45532B;
            /* ì¹´ìš´íŠ¸ë‹¤ìš´ì— ë§ê²Œ í°íŠ¸ë¥¼ 'Courier New' ëŒ€ì‹  PFStardustExtraBoldë¡œ ë³€ê²½ */
            font-family: 'PFStardustExtraBold', sans-serif; 
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .content-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 500px;
        }

        .celebration-bg {
            position: absolute;
            width: 120%;
            height: 120%;
            object-fit: contain;
            opacity: 0.5;
            z-index: 1;
        }

        .message-container {
            position: relative;
            z-index: 2;
            text-align: center;
            margin-top: -150px;
        }

        .main-message {
            font-size: 100px;
            font-weight: bold;
            color: #45532B;
            margin-bottom: 20px;
            font-family: 'PFStardustExtraBold', sans-serif;
            letter-spacing: 15px;
            -webkit-text-stroke: 4px white;
            paint-order: stroke fill;
        }

        .sub-message {
            font-size: 40px;
            font-weight: bold;
            color: #45532B;
            font-family: 'PFStardustExtraBold', sans-serif;
            -webkit-text-stroke: 3px white;
            paint-order: stroke fill;
        }

        .character-container {
            position: absolute;
            right: 50px;
            bottom: 30px;
            z-index: 3;
            display: flex;
            align-items: flex-end;
            gap: 20px;
        }

        .speech-bubble {
            position: absolute;
            bottom: 180px;
            right: 270px;
            background: white;
            border: 4px solid #45532B;
            border-radius: 30px;
            padding: 20px 35px;
            font-size: 35px;
            font-weight: bold;
            color: #45532B;
            font-family: 'PFStardustExtraBold', sans-serif;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: bubble-bounce 2s ease-in-out infinite;
            z-index: 3;
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -15px;
            right: 50px;
            width: 0;
            height: 0;
            border-left: 20px solid transparent;
            border-right: 0px solid transparent;
            border-top: 20px solid white;
            transform: rotate(-10deg);
        }

        .speech-bubble::before {
            content: '';
            position: absolute;
            bottom: -20px;
            right: 48px;
            width: 0;
            height: 0;
            border-left: 22px solid transparent;
            border-right: 0px solid transparent;
            border-top: 22px solid #45532B;
            transform: rotate(-10deg);
            z-index: -1;
        }

        @keyframes bubble-bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .sunglass-emoji {
            width: 220px;
            height: auto;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(5px 5px 10px rgba(0, 0, 0, 0.3));
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-15px);
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
                min-height: 600px;
            }
            
            .logo {
                font-size: 36px;
            }
            
            .time {
                font-size: 48px;
            }
            
            .main-message {
                font-size: 55px;
                letter-spacing: 8px;
            }
            
            .sub-message {
                font-size: 24px;
            }

            .speech-bubble {
                font-size: 20px;
                padding: 15px 25px;
            }
            
            .character-container {
                right: 20px;
                bottom: 20px;
                gap: 10px;
            }

            .sunglass-emoji {
                width: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ìë°”ë”°!</div>
            <div class="time" id="clock">05:00</div>
        </div>

        <div class="content-wrapper">
            <img src="/images/celebrate.png" alt="ì¶•í•˜ ë°°ê²½" class="celebration-bg"/>
            
            <div class="message-container">
                <div class="main-message">ì¶•í•˜í•©ë‹ˆë‹¤!</div>
                <div class="sub-message">ë‹¹ì‹ ì€ 1/2 í™•ë¥ ì„ ëš«ê³  íŠ•ê²¼ìŠµë‹ˆë‹¤</div>
            </div>
        </div>

        <div class="character-container">
            <img src="/images/sunglass.png" alt="ì„ ê¸€ë¼ìŠ¤ ì´ëª¨ì§€" class="sunglass-emoji"/>
        </div>
        <div class="speech-bubble">ì¶•í•˜í•´ ã…ã…~</div>
    </div>

    <script th:inline="javascript">
        // ğŸš¨ ë’¤ë¡œ ê°€ê¸° ì°¨ë‹¨ ë° ë¡œê·¸ì¸ ê°•ì œ ì´ë™ ë¡œì§ ğŸš¨
        window.history.pushState(null, null, window.location.href); 
        
        window.addEventListener('popstate', function() {
            // ë’¤ë¡œ ê°€ê¸°ê°€ ë°œìƒí•˜ë©´ ë¬´ì¡°ê±´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
            window.location.replace('/login'); 
        });
        
        // â­ ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ì‚¬ìš©ì ê³ ìœ ì˜ ì‹œê°„ ë³€ìˆ˜
        const SERVER_CURRENT_TIME = /*[[${currentTime}]]*/ 0;
        const SERVER_START_TIME = /*[[${startTime}]]*/ 0;
        
        // ë¸Œë¼ìš°ì € ì‹œê°„ê³¼ ì„œë²„ ì‹œê°„ì˜ ì°¨ì´ (ì˜¤ì°¨ ë³´ì •ìš©)
        const TIME_OFFSET = Date.now() - SERVER_CURRENT_TIME;

        // select.htmlì—ì„œ ê°€ì ¸ì˜¨ ìƒìˆ˜
        const CLOCK_INTERVAL = 1000;
        const INITIAL_LOCK_DURATION_MS = 60 * 1000;
        const ACTIVE_WINDOW_DURATION_MS = 5 * 60 * 1000;

        const timerDisplay = document.getElementById('clock');

        // â­ select.htmlì˜ ì¹´ìš´íŠ¸ë‹¤ìš´ ë¡œì§
        function manageEnrollmentTimer() {
            const now = Date.now() - TIME_OFFSET;
            const startTime = SERVER_START_TIME;

            const lockEndTime = startTime + INITIAL_LOCK_DURATION_MS;
            const activeEndTime = lockEndTime + ACTIVE_WINDOW_DURATION_MS;

            if (startTime === 0) {
                 timerDisplay.textContent = '---:---';
                 return;
            }

            if (now < lockEndTime) {
                // ëŒ€ê¸° ê¸°ê°„ (1ë¶„)
                const remaining = Math.ceil((lockEndTime - now) / 1000);
                timerDisplay.textContent = `00:${String(remaining).padStart(2, '0')}`;
            } else if (now >= lockEndTime && now < activeEndTime) {
                // í™œì„± ê¸°ê°„ (5ë¶„)
                const remaining = Math.ceil((activeEndTime - now) / 1000);
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            } else {
                // ë§ˆê°     
                timerDisplay.textContent = '00:00';
            }
        }
        
        // íƒ€ì´ë¨¸ ì‹œì‘
        manageEnrollmentTimer();
        setInterval(manageEnrollmentTimer, CLOCK_INTERVAL);

        // ìƒ‰ì¢…ì´ íš¨ê³¼
        function createConfetti() {
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#ffa07a', '#98d8c8', '#f7dc6f'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 3 + 's';
                    confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 5000);
                }, i * 100);
            }
        }

        createConfetti();
        setInterval(createConfetti, 5000);
        
        // 3.5ì´ˆ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ìë™ ì´ë™
        setTimeout(function() {
            window.location.replace('/login');
        }, 3500);
    </script>
</body>
</html>