<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”í¬ë¡œ ì˜ì‹¬</title>
    <style>
        /* í°íŠ¸ ì •ì˜ */
        @font-face {
            font-family: 'PFStardustS';
            src: url('/fonts/PFStardustS.ttf') format('truetype');
        }

        @font-face {
            font-family: 'PFStardustExtraBold';
            src: url('/fonts/PFStardustExtraBold.ttf') format('truetype');
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'PFStardustS', sans-serif; 
        }

        body {
            /* ê²½ê³ ì˜ ì˜ë¯¸ë¡œ ë°°ê²½ìƒ‰ì„ ë¶‰ì€ìƒ‰ ê³„ì—´ë¡œ ë³€ê²½ */
            background: linear-gradient(135deg, #FFD0D0 0%, #FFB0B0 100%); 
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            /* í…Œë‘ë¦¬ ìƒ‰ìƒ ê²½ê³ ì— ë§ê²Œ ë³€ê²½ */
            border: 5px solid #CC0000; 
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            min-height: 600px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 80px;
        }

        .logo {
            font-size: 50px;
            font-weight: bold;
            color: #CC0000; /* ë¡œê³  ìƒ‰ìƒ ë³€ê²½ */
            font-family: 'PFStardustExtraBold', sans-serif;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .time {
            font-size: 60px;
            font-weight: bold;
            color: #45532B;
            /* ì¹´ìš´íŠ¸ë‹¤ìš´ì„ ìœ„í•´ í°íŠ¸ ë³€ê²½ */
            font-family: 'PFStardustExtraBold', sans-serif; 
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }

        .message-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 100px;
        }

        .main-message {
            font-size: 90px;
            font-weight: bold;
            color: #FF0000;
            margin-bottom: 30px;
            font-family: 'PFStardustExtraBold', sans-serif;
            letter-spacing: 10px;
        }

        .sub-message {
            font-size: 45px;
            font-weight: bold;
            color: #FF0000;
            font-family: 'PFStardustExtraBold', sans-serif;
        }

        .sunglass-emoji {
            position: absolute;
            right: 60px;
            bottom: 50px;
            width: 180px;
            height: auto;
            z-index: 10;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(-5deg);
            }
            50% {
                transform: translateY(-20px) rotate(-5deg);
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
                min-height: 500px;
            }
            
            .header {
                margin-bottom: 50px;
            }
            
            .logo {
                font-size: 36px;
            }
            
            .time {
                font-size: 48px;
            }
            
            .message-container {
                margin-top: 60px;
            }
            
            .main-message {
                font-size: 55px;
                letter-spacing: 5px;
            }
            
            .sub-message {
                font-size: 30px;
            }
            
            .sunglass-emoji {
                width: 120px;
                right: 30px;
                bottom: 30px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ìë°”ë”°!</div>
            <div class="time" id="clock">05:00</div>
        </div>

        <div class="message-container">
            <div class="main-message">ë©”í¬ë¡œ ì˜ì‹¬ ë¨!</div>
            <div class="sub-message">ë‹¤ì‹œ ë¡œê·¸ì¸ í•˜ì„¸ìš”!! <br>3ì´ˆ ë’¤ ìë™ìœ¼ë¡œ ì´ë™ë©ë‹ˆë‹¤.</div>
        </div>
        
        <img src="/images/sunglass.png" alt="ì„ ê¸€ë¼ìŠ¤ ì´ëª¨ì§€" class="sunglass-emoji"/>
    </div>

    <script th:inline="javascript">
        // ğŸš¨ ë’¤ë¡œ ê°€ê¸° ì°¨ë‹¨ ë° ë¡œê·¸ì¸ ê°•ì œ ì´ë™ ë¡œì§ ğŸš¨
        window.history.pushState(null, null, window.location.href); 
        
        window.addEventListener('popstate', function() {
            // ë’¤ë¡œ ê°€ê¸°ê°€ ë°œìƒí•˜ë©´ ë¬´ì¡°ê±´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ì‹œí‚µë‹ˆë‹¤.
            window.location.replace('/login'); 
        });
        
        // â­ ì„œë²„ì—ì„œ ì „ë‹¬ë°›ì€ ì‚¬ìš©ì ê³ ìœ ì˜ ì‹œê°„ ë³€ìˆ˜
        const SERVER_CURRENT_TIME = /*[[${currentTime}]]*/ 0;
        const SERVER_START_TIME = /*[[${startTime}]]*/ 0;
        
        // ë¸Œë¼ìš°ì € ì‹œê°„ê³¼ ì„œë²„ ì‹œê°„ì˜ ì°¨ì´ (ì˜¤ì°¨ ë³´ì •ìš©)
        const TIME_OFFSET = Date.now() - SERVER_CURRENT_TIME;

        // select.htmlì—ì„œ ê°€ì ¸ì˜¨ ìƒìˆ˜
        const CLOCK_INTERVAL = 1000;
        const INITIAL_LOCK_DURATION_MS = 60 * 1000;
        const ACTIVE_WINDOW_DURATION_MS = 5 * 60 * 1000;

        const timerDisplay = document.getElementById('clock');

        // â­ select.htmlì˜ ì¹´ìš´íŠ¸ë‹¤ìš´ ë¡œì§ìœ¼ë¡œ ëŒ€ì²´
        function manageEnrollmentTimer() {
            const now = Date.now() - TIME_OFFSET;
            const startTime = SERVER_START_TIME;

            const lockEndTime = startTime + INITIAL_LOCK_DURATION_MS;
            const activeEndTime = lockEndTime + ACTIVE_WINDOW_DURATION_MS;

            if (startTime === 0) {
                 timerDisplay.textContent = '---:---';
                 return;
            }

            if (now < lockEndTime) {
                // ëŒ€ê¸° ê¸°ê°„ (1ë¶„)
                const remaining = Math.ceil((lockEndTime - now) / 1000);
                timerDisplay.textContent = `00:${String(remaining).padStart(2, '0')}`;
            } else if (now >= lockEndTime && now < activeEndTime) {
                // í™œì„± ê¸°ê°„ (5ë¶„)
                const remaining = Math.ceil((activeEndTime - now) / 1000);
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            } else {
                // ë§ˆê°     
                timerDisplay.textContent = '00:00';
            }
        }
        
        // íƒ€ì´ë¨¸ ì‹œì‘
        manageEnrollmentTimer();
        setInterval(manageEnrollmentTimer, CLOCK_INTERVAL);

        // 3.5ì´ˆ í›„ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ìë™ ì´ë™ (window.location.replace ì‚¬ìš©)
        setTimeout(function() {
            window.location.replace('/login'); 
        }, 3500);
    </script>
</body>
</html>